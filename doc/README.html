<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
  <meta content="text/html; charset=ISO-8859-1"
 http-equiv="content-type">
  <title>The FPGA Lady Bug Project</title>
  <meta content="Arnim L&auml;uger &lt;arnim.laeuger at gmx.net&gt;" name="author">
  <meta content="Readme for the FPGA Lady Bug Project"
 name="description">
  <meta
 content="Lady Bug,arcade,FPGA,PCB,Cosmic Avenger,Dorodon,SN76489"
 name="Keywords">
</head>
<body>
<h1 style="text-align: center;"><img alt="" src="lb-right.gif"
 style="width: 42px; height: 36px;" align="middle" hspace="25">The FPGA
Lady Bug Project<img alt="" src="lb-left.gif"
 style="width: 42px; height: 36px;" align="middle" hspace="25"></h1>
<div style="text-align: center;"><br>
17-Jun-2005<br>
</div>
<br>
<br>
<h2>Introduction<br>
</h2>
<div style="text-align: left;">One of the arcade classics is Lady Bug,
a labyrinth game similar to Pacman which adds some features to the
gameplay like swing walls and a bonus system that challenges the
player's ability to combine the hunt for dots with a precise timing.<br>
This project takes the old-time PCB circuits and packs it into modern
FPGA devices, virtualizing the whole hardware and moving it away from
aging silicon chips to virtually any hardware platform of today and the
future. On the other hand, implemeting the game hardware in an FPGA can
achieve the most accurate level of emulation, including even quirks
that breed in the circuits of the original design like graphic glitches
or off-field distortions. The next (and ultimate) level of accuracy is
to rebuild the hardware with real chips resulting in a clone board.<br>
Apart from Lady Bug, some other games targetted the same PCB hardware:
Cosmic Avenger and Dorodon. They also run on the design of this project
by simply replacing the ROMs.<br>
<h2>Content</h2>
This project recreates all circuits that are found on the original
arcade PCB including CPU, RAM, character and sprite graphics and sound
generation. Some memory elements like RAM and PROMs are embedded inside
the design while the program, character and sprite ROMs are located
outside of the design. This is mainly due to the resource requirements
of these ROMs that cannot be satisfied with low-range FPGAs.<br>
Here is a detailed list of internal components of the Lady Bug machine:<br>
<ul>
  <li>CPU Unit<br>
    <ul>
      <li><a href="http://en.wikipedia.org/wiki/Z80">Z80</a> CPU - T80
core from <a
 href="http://www.opencores.org/projects.cgi/web/t80/overview">opencores.org</a>
/ <a href="http://www.fpgaarcade.com/">fpgaarcade.com</a><br>
Copyright (c) 2001-2002 Daniel Wallner (jesus at opencores.org)<br>
Ver 300 started tidyup, MikeJ March 2005<br>
Latest version from www.fpgaarcade.com (original www.opencores.org)<br>
      </li>
      <li>4&nbsp;kByte CPU RAM</li>
      <li>General purpose I/O for joysticks and DIP switches</li>
      <li>Timers for left and right coin chutes</li>
      <li>Decryption PROMs (256&nbsp;Bytes in total)<br>
      </li>
    </ul>
  </li>
  <li>Video Unit
    <ul>
      <li>Video timing generator<br>
      </li>
      <li>Character graphics circuit, including 1&nbsp;kByte tile data
RAM and
512&nbsp;Byte color RAM<br>
      </li>
      <li>Sprite graphics circuit, including 1&nbsp;kByte sprite data
RAM, 2&nbsp;kByte sprite VRAM, 32&nbsp;Byte sprite color look-up PROM
and 32&nbsp;Byte sprite
control PROM<br>
      </li>
      <li>Character and sprite graphics color mixer with RGB loop-up
PROM</li>
    </ul>
  </li>
  <li>Sound Unit
    <ul>
      <li>Two instances of the <a
 href="http://web.inter.nl.net/users/J.Kortink/home/articles/sn76489/">SN76489</a>
sound generator</li>
      <li>Audio mixer</li>
    </ul>
  </li>
  <li>Clock generator - operates with main
20&nbsp;MHz
clock (external or PLL)<br>
  </li>
  <li>Reset generator - requires power-on reset capability of FPGA</li>
</ul>
External components are:<br>
<ul>
  <li>CPU program ROM - 24&nbsp;kByte<br>
  </li>
  <li>Character graphics ROM - 8&nbsp;kByte</li>
  <li>Sprite graphics ROM - 8&nbsp;kByte</li>
  <li>RGB DACs</li>
  <li>Audio DAC</li>
</ul>
Download the latest version 2.1 of the FPGA Lady Bug project here: <a
 href="fpga_ladybug-2.1.tar.gz">fpga_ladybug-2.1.tar.gz</a><br>
<h2>Arcade Machine Interfaces<br>
</h2>
The external components are attached via several interfaces to the Lady
Bug machine:<br>
<ul>
  <li>Clock Input: Base clock of 20&nbsp;MHz.</li>
  <li>Reset Input: Active low external reset input. Debounced and
extended by the internal reset unit (originally an NE555 in monostable
mode).<br>
  </li>
  <li>Control Interface:
    <ul>
      <li>Player 1 - 4-way joystick, two action buttons and a select
button<br>
      </li>
      <li>Player 2 - 4-way joystick, two action buttons and a select
button<br>
      </li>
      <li>Left coin chute trigger</li>
      <li>Right coin chute trigger</li>
      <li>Tilt trigger</li>
    </ul>
  </li>
  <li>DIP Switch Interface: Two blocks consisting of 8 switches each.
Their assignment is specific to the game.</li>
  <li>RGB Video Interface:
    <ul>
      <li>2 bit wide channels for red, green and blue video
information</li>
      <li>Composite synchronization output</li>
    </ul>
  </li>
  <li>Audio Interface</li>
  <ul>
    <li>8 bit digital audio sound output</li>
    <li>1 bit Delta-Sigma DAC sound output<br>
    </li>
  </ul>
  <li>CPU ROM Interface: Address and data buses for 24&nbsp;kByte of
CPU
program ROM</li>
  <li>Character ROM Interface: Address and data buses for 2 x
4&nbsp;kByte
of character graphics data ROM<br>
  </li>
  <li>Sprite ROM Interface: Address and data buses for 2 x 4&nbsp;kByte
of
sprite graphics data ROM<br>
  </li>
</ul>
<h3>Control<br>
</h3>
Both the axis and button inputs for the joystick ports are low active
as is the tilt input. In contrast, the coin chute triggers are high
active. A trigger impulse at the latter ones is shaped on the original
PCB by NE556 timers, probably to suppress glitches that would
generate multiple coin events otherwise. This shaping is also done
although it might be not necessary for a "clean" digital design
environment.<br>
<h3>External Memory<br>
</h3>
Especially the ROM interfaces could be a challenge when implementing
the FPGA Lady Bug machine on small development boards. At a first
glance, it seems that three separate external ROMs have to be attached
to suit these requirements. Thanks to the clocking system, it is
possible to supply the ROM data from a single 8 bit wide memory by
multiplexing all three data channels. The external memory has to be
capable of providing 8 bits of data in parallel at a clock frequency
of 20 MHz. For details refer to the three components in <code>src/board/misc</code>:<br>
<ul>
  <li><code>rom_dispatcher_8.vhd</code><br>
standard data path multiplexer for external 8 bit memory</li>
  <li><code>rom_dispatcher_16.vhd</code><br>
wrapper to accommodate 16 bit memory</li>
  <li><code>rom_ram_dispatcher_16.vhd</code><br>
combined ROM and CPU RAM multiplexer<br>
  </li>
</ul>
The first two designs simply feed the CPU, character and sprite ROM
interfaces from any external memory (ROM or RAM). The latter design
enables implementation of the FPGA Lady Bug project in devices which
contain too few internal RAM resources. One example is the Spartan IIe
300 which lacks exactly 1 BRAM to implement all memory arrays inside
the device. By setting the generic <code>external_ram_g</code> to 1,
the 4&nbsp;kByte CPU RAM is removed from the FPGA and has to be
attached via a separate memory interface to <code>ladybug_machine.vhd</code>.
This additional port is served by <code>rom_ram_dispatcher_16.vhd</code>
which multiplexes all four data channels (3 ROMs + 1 CPU RAM) to a
single 16&nbsp;bit wide external RAM. This combined approach is
optional as it is always
possible to feed the 3 ROMs from one external memory (with the help of <code>rom_dispatcher_x</code>)
and the CPU RAM
from a separate external RAM device.<br>
<h3>RGB Video<br>
</h3>
The digital information for the three RGB channels have to be converted
to analog voltages by three DAC circuits, each of them consists of
simple resitors. See the
following figure for a proposal on how to build them.<br>
<br>
<div style="text-align: center;"><img title="RGB DACs"
 alt="RGB DACs implemented with resistors" src="rgb_dac.png"
 style="width: 304px; height: 201px;">
<br>
</div>
<div style="text-align: left;"><br>
The better approach is to use a professional DAC circuit like found on
the <a href="http://www.zefant.de/">Zefant Mini-ITX board</a>. This
one offers a VGA interface to a
standard PC monitor. Three video DAC channels can be fed with 8-bit
wide color information each. The drawback is that the simple RGB video
information has to be brushed up to suit the VGA standard. A scan
doubler is used here to double the pixel rate towards the VGA monitor
although the VDP inside the console core still outputs RGB video
signals.<br>
<br>
<h3>Digital Audio<br>
</h3>
The digital audio information is supplied via an 8 bit wide signed
vector ranging from -128 to 127 (as defined in numeric_std package). It
depends on the DAC implementation on your board whether this value can
be used as it is or some post processing is needed. On the JOP board, I
use two DAC implementations in parallel. First is a DAC built with
resistors. This requires to add an offset of 128
to the signed value to obtain positive audio data. Refer to the
following
picture for the discrete DAC.<br>
<br>
</div>
<div style="text-align: center;"><img title="Audio DAC"
 alt="Audio DAC implemented with resistors" src="audio_dac.png"
 style="width: 336px; height: 270px;"><br>
<div style="text-align: left;"><br>
Next is a delta-sigma DAC implementation. This one requires a minimum
number of external components but adds some logic in the FPGA. For a
detailed discussion of delta-sigma DACs refer to Xilinx' application
note <a href="http://direct.xilinx.com/bvdocs/appnotes/xapp154.pdf">XAPP154</a>.
The external circuit is shown in the next figure.<br>
<br>
<div style="text-align: center;"><img
 alt="Low-Pass Filter for Delta-Sigma Audio DAC Implementation"
 title="Low-Pass Filter" src="audio_sigma_delta_dac.png"
 style="width: 292px; height: 80px;"><br>
<div style="text-align: left;"><br>
</div>
</div>
</div>
</div>
Please keep in mind that the output of these circuits can reach the
full VCCIO level of the FPGA device. Make sure to match the level to
the requirements of the following input.<br>
<br>
Again, the <a href="http://www.zefant.de/">Zefant Mini-ITX board</a>
provides a professional solution here
as well. It contains an AC97 compatible codec chip that handles all the
audio stuff. You "simply" have to supply an AC97 audio
stream. Fortunately, the <a
 href="http://www.opencores.org/projects.cgi/web/ac97/overview">AC97
controller core</a> from <a href="http://opencores.org/">opencores.org</a>
has proven to be versatile enough to allow ad-hoc generation of such a
stream.
All required design instances are included in the project release.<br>
<h2>Porting to a Specific Platform<br>
</h2>
Two separate issues have to be considered when the FPGA Lady Bug design
is ported to different platforms.<br>
At first, an additional top level design has to be generated that
wraps the FPGA Lady Bug machine and embeds it in the environment of the
given FPGA board. All related design files should be stored in
directory <code>src/board/&lt;board&gt;</code>.
There
you will find the implementations for the <a
 href="http://jopdesign.com/">JOP.design</a> <a
 href="http://jopdesign.com/cyclone/index.jsp">Cyclone board</a>, the <a
 href="http://burched.biz/">BurchED</a> <a
 href="http://burched.biz/b5x300.html">B5-X300 board</a> and <a
 href="http://www.simple-solutions.de/">Simple-Solutions</a>'
Zefant-XS3 board.<br>
Next, the technology dependent parts of the design have to be resolved.
These design units are located in directory <code>src/tech/&lt;technology&gt;</code>.
The following sections describe the components in detail.<br>
<h3>Power-on Reset Module</h3>
The power-on reset module in <code>ladybug_por.vhd</code>
uses device specific features to generate a reset signal upon power-on
(or start of operation after device configuration). Consult the
documentation of the FPGA device family on how to implement such
functionality.<br>
<h3>RAM Macros<br>
</h3>
<span style="font-weight: bold;"></span>All RAM wrappers simply
instantiate a single RAM macro. For Altera's Cyclone family and Xilinx'
Spartan2e family a
parametrizable generic RAM
instance (pure RTL code) is used here, which is automatically
translated to device specific RAM blocks. Other device families might
need
dedicated macro instantiations to implement the required memory
configurations.<br>
<br>
<table
 style="margin-left: auto; margin-right: auto; width: 100%; text-align: left;"
 border="1" cellpadding="2" cellspacing="0">
  <tbody>
    <tr>
      <th style="vertical-align: top;">Name<br>
      </th>
      <th style="vertical-align: top;">Memory Layout<br>
      </th>
      <th style="vertical-align: top;">Design File<br>
      </th>
    </tr>
    <tr>
      <td style="vertical-align: top;">CPU RAM<br>
      </td>
      <td style="vertical-align: top;">4 k x 8<br>
      </td>
      <td style="vertical-align: top;"><code>ram_4kx8.vhd</code><br>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top;">Character Data RAM<br>
      </td>
      <td style="vertical-align: top;">1 k x 8<br>
      </td>
      <td style="vertical-align: top;"><code>ram_1kx8.vhd</code><br>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top;">Character Color RAM<br>
      </td>
      <td style="vertical-align: top;">1 k x 4<br>
      </td>
      <td style="vertical-align: top;"><code>ram_1kx4.vhd</code><br>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top;">Sprite Data RAM<br>
      </td>
      <td style="vertical-align: top;">1 k x 8<br>
      </td>
      <td style="vertical-align: top;"><code>ram_1kx8.vhd</code><br>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top;">Sprite VRAM<br>
      </td>
      <td style="vertical-align: top;">1 k x 4<br>
      </td>
      <td style="vertical-align: top;"><code>ram_1kx4.vhd</code><br>
      </td>
    </tr>
  </tbody>
</table>
<br>
<h3>PROM Macros</h3>
Similar to the RAM wrappers, several PROM wrappes exist that
instantiate a ROM macro. The common approach is to use RTL VHDL code to
implement the ROMs and let the implementation tool turn the code into a
device specific memory macro. Automatic generation of the RTL code is
done with the hex2rom utility provided in this release (written by
Daniel Wallner). Refer to <code>roms/hex/Makefile</code> for the
commands required to build the RTL ROMs. This method has been tested
with Quartus II 5.0/6.0 and Xilinx ISE 7.1/8.1 so far.<br>
Depending on the
device characteristics and the design software, a different approach
has to be taken to preload the ROM macros with the data of the
initialization files. For historical reference, PROM wrappers are kept
for Altera's Cyclone family utilizing the
parametrizable generic RAM macro <code>altsyncram</code>
with
an additional hex file containing the PROM data.<br>
<br>
<table style="width: 100%; text-align: left;" border="1" cellpadding="2"
 cellspacing="0">
  <tbody>
    <tr>
      <th style="vertical-align: top;">Name<br>
      </th>
      <th style="vertical-align: top;">Memory Layout<br>
      </th>
      <th style="vertical-align: top;">Design File<br>
      </th>
      <th style="vertical-align: top;">Data File<br>
      </th>
    </tr>
    <tr>
      <td style="vertical-align: top;">RGB Look-up PROM<br>
      </td>
      <td style="vertical-align: top;">32 x 8<br>
      </td>
      <td style="vertical-align: top;"><code>prom_10_2.vhd</code><br>
      </td>
      <td style="vertical-align: top;"><code>10-2.bin</code><br>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top;">Sprite Color Look-up PROM<br>
      </td>
      <td style="vertical-align: top;">32 x 8<br>
      </td>
      <td style="vertical-align: top;"><code>prom_10_1.vhd</code><br>
      </td>
      <td style="vertical-align: top;"><code>10-1.bin</code><br>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top;">Sprite Control PROM<br>
      </td>
      <td style="vertical-align: top;">32 x 8<br>
      </td>
      <td style="vertical-align: top;"><code>prom_10_3.vhd</code><br>
      </td>
      <td style="vertical-align: top;"><code>10-3.bin</code><br>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top;">Decryption PROM, lower<br>
      </td>
      <td style="vertical-align: top;">256 x 4<br>
      </td>
      <td style="vertical-align: top;"><code>prom_decrypt_l.vhd</code><br>
      </td>
      <td style="vertical-align: top;"><code>decrypt_l.bin</code><br>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top;">Decryption PROM, upper<br>
      </td>
      <td style="vertical-align: top;">256 x 4<br>
      </td>
      <td style="vertical-align: top;"><code>prom_decrypt_u.vhd</code><br>
      </td>
      <td style="vertical-align: top;"><code>decrypt_u.bin</code><br>
      </td>
    </tr>
  </tbody>
</table>
<br>
<h2>ROM Memory Data</h2>
Each game consists of several binary files which were dumped from the
original (E)PROM chips on the PCB. This section describes how they have
to be arranged to fit the requirements of the FPGA Lady Bug machine. As
there is no standard naming scheme for the ROM files, they are referred
to with the names used inside the <a href="http://www.mame.net/">MAME</a>
<a href="http://en.wikipedia.org/wiki/ROM_image">ROM sets</a>.<br>
<br>
<table style="width: 100%; text-align: left;" border="1" cellpadding="2"
 cellspacing="0">
  <tbody>
    <tr>
      <th style="vertical-align: top;">Generic Name<br>
      </th>
      <th style="vertical-align: top;">Lady Bug<br>
      </th>
      <th style="vertical-align: top;">Cosmic Avenger<br>
      </th>
      <th style="vertical-align: top;">Dorodon<br>
      </th>
      <td style="vertical-align: top;"><code>Pos</code><br>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top;"><code>cpu1.bin</code><br>
      </td>
      <td style="vertical-align: top;"><code>lb1.cpu</code><br>
      </td>
      <td style="vertical-align: top;"><code>1</code><br>
      </td>
      <td style="vertical-align: top;"><code>dorodon.0</code><br>
      </td>
      <td style="vertical-align: top;"><code>C4</code><br>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top;"><code>cpu2.bin</code><br>
      </td>
      <td style="vertical-align: top;"><code>lb2.cpu</code><br>
      </td>
      <td style="vertical-align: top;"><code>2</code><br>
      </td>
      <td style="vertical-align: top;"><code>dorodon.1</code><br>
      </td>
      <td style="vertical-align: top;"><code>D4</code><br>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top;"><code>cpu3.bin</code><br>
      </td>
      <td style="vertical-align: top;"><code>lb3.cpu</code><br>
      </td>
      <td style="vertical-align: top;"><code>3</code><br>
      </td>
      <td style="vertical-align: top;"><code>dorodon.2</code><br>
      </td>
      <td style="vertical-align: top;"><code>E4</code><br>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top;"><code>cpu4.bin</code><br>
      </td>
      <td style="vertical-align: top;"><code>lb4.cpu</code><br>
      </td>
      <td style="vertical-align: top;"><code>4</code><br>
      </td>
      <td style="vertical-align: top;"><code>N/A</code><br>
      </td>
      <td style="vertical-align: top;"><code>F4</code><br>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top;"><code>cpu5.bin</code><br>
      </td>
      <td style="vertical-align: top;"><code>lb5.cpu</code><br>
      </td>
      <td style="vertical-align: top;"><code>5</code><br>
      </td>
      <td style="vertical-align: top;"><code>N/A</code><br>
      </td>
      <td style="vertical-align: top;"><code>H4</code><br>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top;"><code>cpu6.bin</code><br>
      </td>
      <td style="vertical-align: top;"><code>lb6.cpu</code><br>
      </td>
      <td style="vertical-align: top;"><code>6</code><br>
      </td>
      <td style="vertical-align: top;"><code>N/A</code><br>
      </td>
      <td style="vertical-align: top;"><code>J4</code><br>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top;"><code>sprite_l.bin</code><br>
      </td>
      <td style="vertical-align: top;"><code>lb8.cpu</code><br>
      </td>
      <td style="vertical-align: top;"><code>8</code><br>
      </td>
      <td style="vertical-align: top;"><code>dorodon.4</code><br>
      </td>
      <td style="vertical-align: top;"><code>L7</code><br>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top;"><code>sprite_u.bin</code><br>
      </td>
      <td style="vertical-align: top;"><code>lb7.cpu</code><br>
      </td>
      <td style="vertical-align: top;"><code>8</code><br>
      </td>
      <td style="vertical-align: top;"><code>dorodon.3</code><br>
      </td>
      <td style="vertical-align: top;"><code>M7</code><br>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top;"><code>char_l.bin</code><br>
      </td>
      <td style="vertical-align: top;"><code>lb9.vid</code><br>
      </td>
      <td style="vertical-align: top;"><code>9</code><br>
      </td>
      <td style="vertical-align: top;"><code>dorodon.5</code><br>
      </td>
      <td style="vertical-align: top;"><code>F7</code><br>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top;"><code>char_u.bin</code><br>
      </td>
      <td style="vertical-align: top;"><code>lb10.vid</code><br>
      </td>
      <td style="vertical-align: top;"><code>0</code><br>
      </td>
      <td style="vertical-align: top;"><code>dorodon.6</code><br>
      </td>
      <td style="vertical-align: top;"><code>H7</code><br>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top;"><code>10-1.bin</code><br>
      </td>
      <td style="vertical-align: top;"><code>10-1.vid</code><br>
      </td>
      <td style="vertical-align: top;"><code>k9.bpr</code><br>
      </td>
      <td style="vertical-align: top;"><code>dorodon.bp1</code><br>
      </td>
      <td style="vertical-align: top;"><code>F4</code><br>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top;"><code>10-2.bin</code><br>
      </td>
      <td style="vertical-align: top;"><code>10-2.vid</code><br>
      </td>
      <td style="vertical-align: top;"><code>t8.bpr</code><br>
      </td>
      <td style="vertical-align: top;"><code>dorodon.bp0</code><br>
      </td>
      <td style="vertical-align: top;"><code>K1</code><br>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top;"><code>10-3.bin</code><br>
      </td>
      <td style="vertical-align: top;"><code>10-3.vid</code><br>
      </td>
      <td style="vertical-align: top;"><code>h9.bpr</code><br>
      </td>
      <td style="vertical-align: top;"><code>dorodon.bp2</code><br>
      </td>
      <td style="vertical-align: top;"><code>C4</code><br>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top;"><code>decrypt_l.bin</code><br>
      </td>
      <td style="vertical-align: top;"><code>N/A - use dummy</code><br>
      </td>
      <td style="vertical-align: top;"><code>N/A - use dummy</code><br>
      </td>
      <td style="vertical-align: top;"><code>dorodon.bp3</code><br>
      </td>
      <td style="vertical-align: top;"><br>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top;"><code>decrypt_u.bin</code><br>
      </td>
      <td style="vertical-align: top;"><code>N/A - use dummy</code><br>
      </td>
      <td style="vertical-align: top;"><code>N/A - use dummy</code><br>
      </td>
      <td style="vertical-align: top;"><code>dorodon.bp4</code><br>
      </td>
      <td style="vertical-align: top;"><br>
      </td>
    </tr>
  </tbody>
</table>
<br>
Note that the ROM set for Dorodon contains only three images for the
CPU ROM. Each file is twice the size of a file for Lady Bug for
example, resulting in the same CPU ROM memory size of 24 kByte. The
remaining files <code>cpu4.bin</code>,
<code>cpu5.bin</code> and <code>cpu6.bin</code> are not required
therefore.<br>
The two 16 bit wide ROM data buses for character and sprite data are
fed by the two ROMs <code>*_l.bin</code>
and <code>*_u.bin</code> in parallel.
The <code>*_l.bin</code> file has to
be connected to bits (7 downto 0) while the <code>*_u.bin</code> file
is connected to
bits (15 downto 8).<br>
Only Dorodon actually requires decryption PROMs. Use the dummies
provided in the respective directories under <code>roms</code> for
Lady Bug and Cosmic
Avenger.<br>
In case you work on Linux or another UNIX derivate, you can use the
provided Makefiles and scripts in the <code>roms</code> directory
tree. Simply
copy the ROM set into the empty directory and from within <code>roms</code>
issue for example<br>
<br>
<div style="margin-left: 40px;"><code>$
make ladybug</code><br>
</div>
<br>
You will need the <a href="http://srecord.sourceforge.net/">srecord
utilities</a> for binary to hex conversion (not required when RTL PROMs
are used) and the automated packaging
of the ROM image (always required for the *_dispatcher modules).<br>
<h2>Resource Usage</h2>
Following is the flow summary for an Altera Cyclone device:<br>
<br>
<code>+------------------------------------------------------------------------+<br>
; Flow
Summary&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
;<br>
+-------------------------+----------------------------------------------+<br>
; Flow
Status&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
; Successful - Fri Oct 28 23:47:54
2005&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ;<br>
; Quartus II Version&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ; 5.0 Build 168
06/22/2005 SP 1 SJ Web Edition ;<br>
; Revision
Name&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ;
jop_ladybug&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
;<br>
; Top-level Entity Name&nbsp;&nbsp; ;
jop_ladybug&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
;<br>
;
Family&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
;
Cyclone&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
;<br>
;
Device&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
;
EP1C12Q240C8&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
;<br>
; Timing
Models&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ;
Final&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
;<br>
; Met timing requirements ;
Yes&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
;<br>
; Total logic elements&nbsp;&nbsp;&nbsp; ; 3,275 / 12,060 ( 27 %
)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
;<br>
; Total
pins&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
; 138 / 173 ( 79 %
)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
;<br>
; Total virtual pins&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ;
0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
;<br>
; Total memory bits&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ; 72,320 /
239,616 ( 30 %
)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
;<br>
; Total
PLLs&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
; 1 / 2 ( 50 %
)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
;<br>
+-------------------------+----------------------------------------------+<br>
<br>
</code>
Fitting results for a Spartan-IIE 300 (XC2S300EPQ208):<br>
<br>
<code>Logic Utilization:<br>
&nbsp; Number of Slice Flip Flops:&nbsp;&nbsp;&nbsp;&nbsp; 1,000 out
of&nbsp; 6,144&nbsp;&nbsp; 16%<br>
&nbsp; Number of 4 input
LUTs:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 3,365 out
of&nbsp; 6,144&nbsp;&nbsp; 54%<br>
Logic Distribution:<br>
&nbsp;&nbsp;&nbsp; Number of occupied
Slices:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
2,008 out of&nbsp; 3,072&nbsp;&nbsp; 65%<br>
&nbsp;&nbsp;&nbsp; Number of Slices containing only related
logic:&nbsp; 2,008 out of&nbsp; 2,008&nbsp; 100%<br>
&nbsp;&nbsp;&nbsp; Number of Slices containing unrelated
logic:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0 out of&nbsp;
2,008&nbsp;&nbsp;&nbsp; 0%<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; *See NOTES below for an
explanation of the effects of unrelated logic<br>
Total Number 4 input LUTs:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
3,485 out of&nbsp; 6,144&nbsp;&nbsp; 56%<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Number used as
logic:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
3,365<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Number used as a
route-thru:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
120<br>
&nbsp;&nbsp; Number of bonded
IOBs:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
57 out of&nbsp;&nbsp;&nbsp; 142&nbsp;&nbsp; 40%<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; IOB Flip
Flops:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
31<br>
&nbsp;&nbsp; Number of Block
RAMs:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
14 out of&nbsp;&nbsp;&nbsp;&nbsp; 16&nbsp;&nbsp; 87%<br>
&nbsp;&nbsp; Number of
GCLKs:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
1 out of&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 4&nbsp;&nbsp; 25%<br>
&nbsp;&nbsp; Number of
GCLKIOBs:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
1 out of&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 4&nbsp;&nbsp; 25%<br>
<br>
Total equivalent gate count for design:&nbsp; 260,965</code><br>
<h2>Legal Issues</h2>
Redistribution and use in source and synthesized forms, with or without
modification, are permitted provided that the following conditions are
met:<br>
<br>
Redistributions of source code must retain the above copyright notice,
this list of conditions and the following disclaimer.<br>
<br>
Redistributions in synthesized form must reproduce the above copyright
notice, this list of conditions and the following disclaimer in the
documentation and/or other materials provided with the distribution.<br>
<br>
Neither the name of the author nor the names of other contributors may
be used to endorse or promote products derived from this software
without specific prior written permission.<br>
<br>
THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED
TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A
PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE AUTHOR OR
CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.<br>
<br>
See also the file COPYING.<br>
<br>
<span style="font-weight: bold;">Please note:</span><br>
The copyright of the ROM images is owned by third parties, thus the
above does not apply to them. You have to be entitled separately to use
the ROM images together with the FPGA Lady Bug design. Owning an
original PCB might be ok, but I am not liable for any copyright
violations that arise from your use of the FPGA Lady Bug design.<br>
I will ignore any requests for a copy of the ROM images.<br>
<br>
<br>
-- <br>
Arnim L&auml;uger<br>
&lt;arnim.laeuger at gmx.net&gt;<br>
<br>
</div>
</body>
</html>
